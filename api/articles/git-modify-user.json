{"title":"Git 批量修改用户名和邮箱","slug":"git-modify-user","date":"2022-09-05T07:39:09.000Z","updated":"2022-09-05T07:55:02.051Z","comments":true,"path":"api/articles/git-modify-user.json","realPath":"/2022/09/05/git-modify-user/","excerpt":"一行脚本批量修改 Git 用户名和邮箱……","covers":["https://pic.izhaoo.com/20220829111417.png"],"cover":"https://pic.izhaoo.com/2020091043030.jpg","content":"<p>一行脚本批量修改 Git 用户名和邮箱……</p>\n<span id=\"more\"></span>\n\n<p>业务上依赖了一个自动生成表单的库，虽然是楼下团队写的，但是维护在开源社区。</p>\n<p>最近遇到些水土不服的“Bug”，求人次数多了人家也烦，索性就自己改八改八推 GitHub PR 了。</p>\n<p>推完 GitHub 回来发现公司的 GitLab 推不上去了，要用公司账号才行，拉了一下提交 log 好家伙已经一堆了，每个手动改账号肯定不现实。</p>\n<p>于是便搜刮了一个批量改 Git 账号的脚本，sh 跑一下就行，灰常银杏~</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><code class=\"hljs sh\">git filter-branch --env-filter <span class=\"hljs-string\">&#x27;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">oldEmail=&quot;替换原邮箱&quot;</span><br><span class=\"hljs-string\">newName=&quot;替换原用户名&quot;</span><br><span class=\"hljs-string\">newEmail=&quot;替换新邮箱&quot;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">if [ &quot;$GIT_COMMITTER_EMAIL&quot; = &quot;$oldEmail&quot; ]; then</span><br><span class=\"hljs-string\">    export GIT_COMMITTER_NAME=&quot;$newName&quot;</span><br><span class=\"hljs-string\">    export GIT_COMMITTER_EMAIL=&quot;$newEmail&quot;</span><br><span class=\"hljs-string\">fi</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">if [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;$oldEmail&quot; ]; then</span><br><span class=\"hljs-string\">    export GIT_AUTHOR_NAME=&quot;$newName&quot;</span><br><span class=\"hljs-string\">    export GIT_AUTHOR_EMAIL=&quot;$newEmail&quot;</span><br><span class=\"hljs-string\">fi</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&#x27;</span> --tag-name-filter cat -- --branches --tags<br></code></pre></td></tr></table></figure>\n\n<p><img  src=\"https://pic.izhaoo.com/20220829111417.png\"  ><span class=\"image-caption\">preview</span></p>\n","more":"<p>业务上依赖了一个自动生成表单的库，虽然是楼下团队写的，但是维护在开源社区。</p>\n<p>最近遇到些水土不服的“Bug”，求人次数多了人家也烦，索性就自己改八改八推 GitHub PR 了。</p>\n<p>推完 GitHub 回来发现公司的 GitLab 推不上去了，要用公司账号才行，拉了一下提交 log 好家伙已经一堆了，每个手动改账号肯定不现实。</p>\n<p>于是便搜刮了一个批量改 Git 账号的脚本，sh 跑一下就行，灰常银杏~</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><code class=\"hljs sh\">git filter-branch --env-filter <span class=\"hljs-string\">&#x27;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">oldEmail=&quot;替换原邮箱&quot;</span><br><span class=\"hljs-string\">newName=&quot;替换原用户名&quot;</span><br><span class=\"hljs-string\">newEmail=&quot;替换新邮箱&quot;</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">if [ &quot;$GIT_COMMITTER_EMAIL&quot; = &quot;$oldEmail&quot; ]; then</span><br><span class=\"hljs-string\">    export GIT_COMMITTER_NAME=&quot;$newName&quot;</span><br><span class=\"hljs-string\">    export GIT_COMMITTER_EMAIL=&quot;$newEmail&quot;</span><br><span class=\"hljs-string\">fi</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">if [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;$oldEmail&quot; ]; then</span><br><span class=\"hljs-string\">    export GIT_AUTHOR_NAME=&quot;$newName&quot;</span><br><span class=\"hljs-string\">    export GIT_AUTHOR_EMAIL=&quot;$newEmail&quot;</span><br><span class=\"hljs-string\">fi</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">&#x27;</span> --tag-name-filter cat -- --branches --tags<br></code></pre></td></tr></table></figure>\n\n<p><img  src=\"https://pic.izhaoo.com/20220829111417.png\"  ><span class=\"image-caption\">preview</span></p>","categories":[{"name":"技术","path":"api/categories/技术.json"}],"tags":[{"name":"Git","path":"api/tags/Git.json"},{"name":"技术","path":"api/tags/技术.json"}]}