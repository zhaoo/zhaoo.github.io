

<!DOCTYPE html>
<html lang="zh-CN" color-mode=light>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Django - 搭建博客 - zhaoo</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="google" content="notranslate" />
  <meta name="keywords" content="zhaoo, hexo-theme-zhaoo, 简约主题, django,blog,博客,mtv,vscode">
  <meta name="description" content="最近在学习Vue.js，需要后端配合返回Json，所以...">
  <meta name="author" content="zhaoo">
  <link rel="icon" href="/images/icons/favicon-16x16.png" type="image/png" sizes="16x16">
  <link rel="icon" href="/images/icons/favicon-32x32.png" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png" sizes="180x180">
  <meta rel="mask-icon" href="/images/icons/stun-logo.svg" color="#333333">
  
    <meta rel="msapplication-TileImage" content="/images/icons/favicon-144x144.png">
    <meta rel="msapplication-TileColor" content="#000000">
  

  
<link rel="stylesheet" href="/css/style.css">


  
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1445822_p6ry5n7lrr.css">

  

  
    
<link rel="stylesheet" href="https://pic.izhaoo.com/fancybox.css">

  

  
    
      
        
        
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/xcode.min.css" name="highlight-style" mode="light">

      
        
        
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/solarized-dark.min.css" name="highlight-style" mode="dark">

      
  

  <script>
    var CONFIG = window.CONFIG || {};
    var ZHAOO = window.ZHAOO || {};
    CONFIG = {
      isHome: false,
      fancybox: true,
      pjax: false,
      loading: {
        gif: '/images/theme/loading.gif',
        lottie: ''
      },
      lazyload: {
        enable: false,
        only_post: 'false',
        loading: {
          gif: '/images/theme/loading.gif',
          lottie: 'https://pic.izhaoo.com/lottie.json'
        }
      },
      donate: {
        enable: true,
        alipay: 'https://pic.izhaoo.com/alipay.jpg',
        wechat: 'https://pic.izhaoo.com/wechat.jpg'
      },
      galleries: {
        enable: true
      },
      fab: {
        enable: true,
        always_show: false
      },
      carrier: {
        enable: true
      },
      daovoice: {
        enable: true
      },
      preview: {
        background: {
          default: '',
          api: ''
        },
        motto: {
          default: '我在开了灯的床头下，想问问自己的心啊。',
          typing: true,
          api: 'https://v1.hitokoto.cn/?encode=text&c=d',
          data_contents: ''
        },
      },
      qrcode: {
        enable: true,
        type: 'image',
        image: 'https://pic.izhaoo.com/weapp-code.jpg',
      },
      toc: {
        enable: true
      },
      scrollbar: {
        type: 'default'
      },
      notification: {
        enable: false,
        delay: 4500,
        list: '[{"title":"傻逼作者要上班去了","content":"傻逼作者要上班去了，以后没时间开发新功能了。","enable":true,"startTime":"2020-11-26 21:11:12","endTime":"2020-11-30 21:11:27"},{"title":"招募管理员大哥","content":"招募几位管理员大哥，平时帮忙管理一下交流群。","enable":false,"startTime":"2020-11-27 21:11:12","endTime":"2020-12-30 21:11:27"},{"title":"测试","content":"招募几位管理员大哥，平时帮忙管理一下交流群。","enable":true,"startTime":"2019-11-27 21:11:12","endTime":"2020-5-30 21:11:27"}]',
        page_white_list: '["/","/categories/"]',
        page_black_list: '["/about/"]'
      },
      search: {
        enable: true,
        path: '/search.xml'
      }
    }
  </script>

  

  

<meta name="generator" content="Hexo 5.4.0"></head>

<body class="lock-screen">
  <div class="loading" id="loading"></div>
  
    


  <nav class="navbar">
    <div class="left">
      
        <i class="iconfont iconhome j-navbar-back-home"></i>
      
      
        <i class="iconfont iconqrcode j-navbar-qrcode"></i>
      
      
        <i class="iconfont iconmoono" id="color-toggle" color-toggle="light"></i>
      
      
        <i class="iconfont iconsearch j-navbar-search"></i>
      
    </div>
    <div class="center">Django - 搭建博客</div>
    <div class="right">
      <i class="iconfont iconmenu j-navbar-menu"></i>
    </div>
    
      <div id="qrcode-navbar"></div>
    
  </nav>

  
  

<nav class="menu">
  <div class="menu-container">
    <div class="menu-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <ul class="menu-content"><li class="menu-item">
        <a href="/ " class="underline "> 首页</a>
      </li><li class="menu-item">
        <a href="/galleries/ " class="underline "> 摄影</a>
      </li><li class="menu-item">
        <a href="/2020/05/05/hexo-theme-zhaoo-doc/ " class="underline "> 文档</a>
      </li><li class="menu-item">
        <a href="/2021/07/05/hexo-weapp-zhaoo-doc/ " class="underline "> 小程序</a>
      </li><li class="menu-item">
        <a href="/archives/ " class="underline "> 归档</a>
      </li><li class="menu-item">
        <a href="/tags/ " class="underline "> 标签</a>
      </li><li class="menu-item">
        <a href="/categories/ " class="underline "> 分类</a>
      </li><li class="menu-item">
        <a href="/about/ " class="underline "> 关于</a>
      </li></ul>
    
      <div class="menu-copyright"><p>Copyright© 2019 - 2021 | <a target="_blank" href="https://www.izhaoo.com">zhaoo</a> .AllRightsReserved</p><p>浙ICP备17007822号</p></div>
    
  </div>
</nav>
  <main id="main">
  <div class="article-wrap">
    <div class="row container">
      <div class="col-xl-3"></div>
      <div class="col-xl-6"><article class="article">
  <div class="wrap">
    <section class="head">
  <img src="https://pic.izhaoo.com/20191211065844.jpg" draggable="false">
  <div class="head-mask">
    <h1 class="head-title">Django - 搭建博客</h1>
    <div class="head-info">
      <span class="post-info-item"><i class="iconfont iconcalendar"></i>八月 27, 2018</span>
      
        <span class="post-info-item">
          <i class="iconfont iconeye"></i><span id="/2018/08/27/django-build-blog/" class="leancloud-counter" data-flag-title="Django - 搭建博客"></span>
        </span>
        <span class="post-info-item">
          <i class="iconfont iconheart"></i><span id="/2018/08/27/django-build-blog/" class="leancloud-like" data-flag-title="Django - 搭建博客"></span>
        </span>
      
      <span class="post-info-item"><i class="iconfont iconfont-size"></i>12486</span>
    </div>
  </div>
</section>
    <section class="main">
      <section class="content">
        
          <p><p>最近在学习Vue.js，需要后端配合返回Json，所以就顺便学习了一下Django，这里就记录一下搭建博客的全过程，作为起手式。由于之前用Thinkphp做过一个项目，所以对MVC(MTV)框架有了一点了解，Django就轻车熟路了，直接上手。这里就记个记个流水账，没学过的朋友直接照着敲就行了，敲完一定会有不少理解。</p></p>
        
        <h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><ol>
<li>资源下载地址:<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1aUI4MEi0T17CfCKCXWFl7g">项目文件</a>  <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1nlCxZ0t93xPPflx01MBSTw">前端文件</a></li>
<li>文章中的<code>｛%</code>和<code>%｝</code>已经转义成了<code>&amp;#123;%</code>和<code>%&amp;#125;</code>，请自行更改。因为会和<code>hexo</code>的语法产生冲突，你看哈，我这里都得写成了中文的（其实是英文的），坑爹。</li>
</ol>
<h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><p>我的操作系统是Win10，IDE是VSCode。先给VSCode安装几个插件:</p>
<ul>
<li>Python</li>
<li>Django Template</li>
</ul>
<p>然后我们需要安装Python，去官网下载最新版本，一路下一步即可，我装的是Python3.7。</p>
<p>Python安装后我们需要安装一个Virtualenv来创建虚拟环境。为什么呀创建虚拟环境呢？因为Python是基于模块来扩展功能的，我们完成一个项目会安装许多的扩展模块，项目一多不容易管理，且容易发生冲突，所以我们需</p>
<p>要创建一个虚拟环境将每个项目封装起来。<code>ctrl + ~</code>打开终端，输入以下指令：</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> virtualenv  <span class="hljs-comment">#安装Virtualenv</span><br></code></pre></td></tr></table></figure>

<p>新建一个目录，我这叫<code>django_web</code>，cd到目录。</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><code class="hljs dockerfile">virtualenv <span class="hljs-keyword">env</span>  <span class="hljs-comment">#创建env虚拟文件夹</span><br><span class="hljs-keyword">env</span>\Scripts\activate.bat  <span class="hljs-comment">#激活虚拟环境</span><br></code></pre></td></tr></table></figure>

<p>在当前目录下新建<code>requirements.txt</code>文件，写入如下内容：</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><code class="hljs angelscript">django<br>pylint<br>pylint-django<br><span class="hljs-built_in">auto</span>pep8<br></code></pre></td></tr></table></figure>

<p>django–Web开发框架，pylint–Python静态语法检测器,pylint-django– 适用于Django项目的语法检查插件，autopep8–代码格式化工具</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> requirements.txt  <span class="hljs-comment">#安装以上模块</span><br></code></pre></td></tr></table></figure>

<h1 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h1><p>在<code>django_web</code>目录下输入以下指令：</p>
<figure class="highlight mipsasm"><table><tr><td class="code"><pre><code class="hljs mipsasm">django-admin startproject <span class="hljs-keyword">blog </span> <span class="hljs-comment">#创建blog项目</span><br><br>cd <span class="hljs-keyword">blog </span> <span class="hljs-comment">#cd到blog目录</span><br><br>python manage.py startapp index  <span class="hljs-comment">#创建index应用</span><br></code></pre></td></tr></table></figure>

<p>项目&amp;应用：</p>
<p>项目： 在这个项目中通俗的讲就是<code>博客项目（blog）</code>。一个项目中可以有许多功能独立的应用组成，最终完成整个系统。</p>
<p>应用： 在这个项目中通俗的讲有两个应用，分别是<code>前台（index）</code>和<code>后台（admin）</code>。应用是功能相对独立的一个模块，可以移植到不同的项目中。</p>
<p>在VSCode中按<code>Ctrl + Shift + P</code>，输入<code>工作区</code>，点击<code>工作区：打开工作区配置文件</code>，查看是否含有以下内容，没有的话做适当修改。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><code class="hljs swift"><span class="hljs-string">&quot;settings&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;python.pythonPath&quot;</span>: <span class="hljs-string">&quot;$&#123;workspaceFolder&#125;<span class="hljs-subst">\\</span>env<span class="hljs-subst">\\</span>Scripts<span class="hljs-subst">\\</span>python.exe&quot;</span>,<br>    <span class="hljs-string">&quot;python.linting.pylintPath&quot;</span>: <span class="hljs-string">&quot;pylint&quot;</span>,<br>    <span class="hljs-string">&quot;python.linting.pylintArgs&quot;</span>: [<br>        <span class="hljs-string">&quot;--load-plugins&quot;</span>, <span class="hljs-string">&quot;pylint_django&quot;</span><br>    ],<br>    <span class="hljs-string">&quot;python.formatting.autopep8Path&quot;</span>: <span class="hljs-string">&quot;autopep8&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>再次按下<code>Ctrl + Shift + P</code>，输入<code>Python</code>，点击<code>Python：选择解析器</code>，然后点击<code>Python3.7（virtualenv）</code>。即使用虚拟环境中的Python解析器。</p>
<p>至此，项目目录结构如下：</p>
<figure class="highlight haml"><table><tr><td class="code"><pre><code class="hljs haml">django_web<br>  -<span class="ruby"> env  <span class="hljs-comment">#虚拟环境</span></span><br><span class="ruby"></span>  -<span class="ruby"> blog</span><br><span class="ruby"></span>    -<span class="ruby">- manage.py  <span class="hljs-comment">#Django的管理工具，可以运行web服务、管理数据库等工作。</span></span><br><span class="ruby"></span>    -<span class="ruby">- blog  <span class="hljs-comment">#blog项目</span></span><br><span class="ruby"></span>      -<span class="ruby">-- settings.py  <span class="hljs-comment">#项目配置文件</span></span><br><span class="ruby"></span>      -<span class="ruby">-- urls.py  <span class="hljs-comment">#将URL模式映射到应用</span></span><br><span class="ruby"></span>      -<span class="ruby">-- wsgi.py  <span class="hljs-comment">#项目部署</span></span><br><span class="ruby"></span>    -<span class="ruby">- index  <span class="hljs-comment">#index应用</span></span><br><span class="ruby"></span>      -<span class="ruby">-- admin.py  <span class="hljs-comment">#默认的后台管理程序</span></span><br><span class="ruby"></span>      -<span class="ruby">-- apps.py  <span class="hljs-comment">#应用的相关配置。</span></span><br><span class="ruby"></span>      -<span class="ruby">-- models.py  <span class="hljs-comment">#模型文件（model），用于配置ORM，设计数据库</span></span><br><span class="ruby"></span>      -<span class="ruby">-- tests.py  <span class="hljs-comment">#单元测试</span></span><br><span class="ruby"></span>      -<span class="ruby">-- veiws.py  <span class="hljs-comment">#视图文件（view），用于编写功能的主要处理逻辑</span></span><br></code></pre></td></tr></table></figure>

<h1 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h1><p>Django默认且自带<code>SQLite</code>数据库，对于这个小项目，使用<code>SQLite</code>足够了。如果你想使用其他数据库，如<code>MySQL</code>,请查阅相关文档   </p>
<p>打开<code>index</code>目录下的<code>model.py</code>，该文件用于定义数据库结构。</p>
<figure class="highlight nix"><table><tr><td class="code"><pre><code class="hljs nix">from django.db <span class="hljs-built_in">import</span> models<br><br>class Article(models.Model):<br>    <span class="hljs-attr">title</span> = models.CharField(<span class="hljs-attr">max_length</span> = <span class="hljs-number">150</span>)  <span class="hljs-comment">#文章标题</span><br>    <span class="hljs-attr">content</span> = models.TextField()  <span class="hljs-comment">#文章正文</span><br>    <span class="hljs-attr">post_time</span> = models.DateTimeField()  <span class="hljs-comment">#文章创建时间</span><br>    <span class="hljs-attr">views</span> = models.IntegerField(<span class="hljs-attr">default=0)</span>  <span class="hljs-comment">#文章访问量，初始化为0</span><br></code></pre></td></tr></table></figure>

<p>可以看到类名<code>Article</code>将作为数据库中的一张数据表，类中的每一条内容为一个字段，<code>=</code>后面的models的实例为字段的类型。</p>
<p>在<code>blog</code>目录下执行以下指令：</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python</span> manage.<span class="hljs-keyword">py</span> makemigrations blog  #将模型文件储存为迁移<br><br><span class="hljs-keyword">python</span> manage.<span class="hljs-keyword">py</span> migrate  #通过迁移创建数据库<br></code></pre></td></tr></table></figure>

<p>现在，项目文件下会生成一个<code>db.sqlite3</code>文件，这个便是系统生成的数据库，可以使用SQLite管理工具打开。</p>
<h1 id="启动默认后台管理程序"><a href="#启动默认后台管理程序" class="headerlink" title="启动默认后台管理程序"></a>启动默认后台管理程序</h1><p>使用默认的后台管理程序，需要先创建账号。在<code>blog</code>目录下输入以下指令：</p>
<figure class="highlight autoit"><table><tr><td class="code"><pre><code class="hljs autoit">python manage.py createsuperuser  <span class="hljs-meta">#创建账户</span><br>Username (leave blank <span class="hljs-keyword">to</span> use <span class="hljs-string">&#x27;fnngj&#x27;</span>):  admin  <span class="hljs-meta">#管理员帐号</span><br>Email address:  <span class="hljs-number">894519210</span><span class="hljs-symbol">@qq</span>.com  <span class="hljs-meta">#email</span><br>Password:  ********  <span class="hljs-meta"># 密码</span><br>Password (again):  ********  <span class="hljs-meta">#重复密码</span><br>Superuser created successfully.  <span class="hljs-meta">#创建成功</span><br></code></pre></td></tr></table></figure>

<p>接下来我们将创建好的<code>Article</code>数据表绑定到后台管理程序。</p>
<p>打开<code>index</code>下的<code>admin.py</code>文件，写入如下内容：</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> <span class="hljs-keyword">admin</span><br><span class="hljs-keyword">from</span> <span class="hljs-keyword">index</span>.models <span class="hljs-keyword">import</span> Article<br><br><span class="hljs-keyword">class</span> ArticleAdmin(<span class="hljs-keyword">admin</span>.ModelAdmin):<br>    list_display = [<span class="hljs-string">&#x27;title&#x27;</span>, <span class="hljs-string">&#x27;content&#x27;</span>, <span class="hljs-string">&#x27;post_time&#x27;</span>, <span class="hljs-string">&#x27;views&#x27;</span>]<br><br><span class="hljs-keyword">admin</span>.site.register(Article, ArticleAdmin)<br></code></pre></td></tr></table></figure>

<p>然后在<code>blog</code>下输入以下指令，启动Django：</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python</span> manage.<span class="hljs-keyword">py</span> runserver<br></code></pre></td></tr></table></figure>

<p>在浏览器中输入<code>127.0.0.1:8000/admin</code>，输入用户名密码，进入后台管理页面。</p>
<p>在这里，我们可以撰写文章了，当务之急，肯定是先写个“Hello, World!”嘛。</p>
<p><img  src="https://pic.izhaoo.com/20180827131159.jpg"  ><span class="image-caption">hello,world</span></p>
<p>可以看到，Django默认配置的后台管理程序还是很方便的，虽说有点小丑，但功能还是很齐全的。没关系，我们后面会开发自己的后台管理页面。</p>
<h1 id="模板渲染"><a href="#模板渲染" class="headerlink" title="模板渲染"></a>模板渲染</h1><p>数据库已经有文章内容了，这时候我们需要完成我们的前台页面。</p>
<p>首先在<code>index</code>目录下创建一个<code>templates</code>文件夹，这个文件夹是用来存放我们的<code>.html</code>文件的。在<code>templates</code>目录下将我们<code>前端文件</code>中的<code>.html</code>文件全拷进去。</p>
<p>打开<code>veiws.py</code>文件，输入：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render<br><span class="hljs-keyword">from</span> index.models <span class="hljs-keyword">import</span> Article  <span class="hljs-comment">#引入Article类，即数据库</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>(<span class="hljs-params">request</span>):</span><br>    articleList = Article.objects.order_by(<span class="hljs-string">&quot;-post_time&quot;</span>).<span class="hljs-built_in">all</span>()  <span class="hljs-comment">#从数据库中读出所有文章列表</span><br>    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;index.html&#x27;</span>, &#123;<span class="hljs-string">&#x27;articleList&#x27;</span>: articleList&#125;)  <span class="hljs-comment">#将文章列表渲染到index.html</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">article</span>(<span class="hljs-params">request, <span class="hljs-built_in">id</span></span>):</span><br>    article = Article.objects.get(pk=<span class="hljs-built_in">id</span>)<br>    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;article.html&#x27;</span>, &#123;<span class="hljs-string">&#x27;article&#x27;</span>: article&#125;)<br></code></pre></td></tr></table></figure>

<p>打开<code>index.html</code>，将其中输出文章列表的<code>div</code>内容改成如下（多余的div块删了吧，只留一个就行）</p>
<figure class="highlight handlebars"><table><tr><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container list wrap&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-symbol">&amp;#123;</span>% for article in articleList %<span class="hljs-symbol">&amp;#125;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;\<span class="hljs-symbol">&amp;#123;</span>% url &#x27;index:article&#x27; article.id %\&#125;&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">article.title</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;info&quot;</span>&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa fa-clock-o&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>发布时间: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">article.post_time</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa fa-eye&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>阅读量: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">article.views</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">            </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">article.content</span> &#125;&#125;</span><span class="xml"></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-symbol">&amp;#123;</span>% endfor %<span class="hljs-symbol">&amp;#125;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>稍微解释一下，这个<code>views.py</code>就是负责将数据从数据库调出，业务逻辑处理后，渲染到前端模板（<code>index.html</code>）。我们对应着这两个文件看：</p>
<p><img  src="https://pic.izhaoo.com/20180827135408.jpg"  ><span class="image-caption">视图层解释</span></p>
<p><code>views.py</code>读取了<code>Article</code>数据库中的数据，存放到<code>articleList</code>这个变量中，然后渲染到<code>index.html</code>文件。</p>
<p><code>&amp;#123;% for article in articleList %&amp;#125;</code> 表示进行循环，文章有就循环几次。<code>&#123;&#123; article.title &#125;&#125;</code>双括号中的数据会替换成数据库中读出的每条记录，这里就是对应文章的标题。</p>
<p><code>\&amp;#123;% url &#39;index:article&#39; article.id %\&#125;</code>会渲染成一条链接，链接到<code>index</code>应用中的<code>article</code>类并传入<code>article</code>的<code>ID</code>，即<code>/article/id/</code>。</p>
<p>同样的，我们将<code>article.html</code>也套入渲染标签，具体的可以参照项目文件。</p>
<h1 id="路由绑定"><a href="#路由绑定" class="headerlink" title="路由绑定"></a>路由绑定</h1><p>写完模板文件后网页还不能直接访问，因为我们还没有建立对应的路由。</p>
<p>在<code>blog</code>目录下的<code>urls.py</code>写入内容：</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> <span class="hljs-keyword">admin</span><br><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> <span class="hljs-type">path</span>, <span class="hljs-keyword">include</span><br><br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;admin/&#x27;</span>, <span class="hljs-keyword">admin</span>.site.urls),  #后台的URL<br>    path(<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-keyword">include</span>(<span class="hljs-string">&#x27;index.urls&#x27;</span>)),  #<span class="hljs-keyword">index</span>应用的URL<br>]<br></code></pre></td></tr></table></figure>

<p>然后在<code>index</code>目录新建一个<code>urls.py</code>，写入：</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> <span class="hljs-type">path</span><br><span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views  #引入视图类<br><br>app_name = <span class="hljs-string">&#x27;index&#x27;</span>  #定义命名空间<br>urlpatterns = [<br>    path(<span class="hljs-string">&#x27;&#x27;</span>, views.<span class="hljs-keyword">index</span>, <span class="hljs-type">name</span>=<span class="hljs-string">&#x27;index&#x27;</span>),  #绑定<span class="hljs-keyword">index</span>，即首页<br>    path(<span class="hljs-string">&#x27;article/&lt;int:id&gt;/&#x27;</span>, views.article, <span class="hljs-type">name</span>=<span class="hljs-string">&#x27;article&#x27;</span>),  #绑定artile，即文章页<br>]<br></code></pre></td></tr></table></figure>
<p>这里我们用到了俩个<code>urls.py</code>，这样做有个好处，系统先解析到项目目录下的<code>urls</code>，再分发到各个应用下的<code>urls</code>，当应用多时，不容易发生冲突。一图以蔽之：</p>
<p><img  src="https://pic.izhaoo.com/20180827141153.jpg"  ><span class="image-caption">url分发</span></p>
<p>解释一下<code>path</code>，<code>path(&#39;article/&lt;int:id&gt;/&#39;, views.article, name=&#39;article&#39;)</code>中： 第一部分为匹配URL（匹配“article/id”），<code>&lt;int:id&gt;</code>说明传入一个int类型的id参数；第二部分将匹配到的链接解析到<code>views.py</code>视图文件中的<code>article</code>类；第三部分<code>name=&#39;article&#39;</code>定义的是一个别名，前面<code>\&amp;#123;% url &#39;index:article&#39; article.id %\&#125;</code>中的<code>index:article</code>就是这个别名。</p>
<p>现在运行<code>python manmage.py runserver</code>，就可以看到页面了。</p>
<p><img  src="https://pic.izhaoo.com/20180827141930.jpg"  ><span class="image-caption">无样式首页</span></p>
<p>很丑对不对，因为我们没有引入<code>css</code>样式，下面介绍怎么引入静态资源。</p>
<h1 id="静态资源引入"><a href="#静态资源引入" class="headerlink" title="静态资源引入"></a>静态资源引入</h1><p>页面中的<code>css、js、images、fonts</code>都是静态资源，我们需要将它存放到公共目录，然后在<code>html</code>中动态引入。</p>
<figure class="highlight autohotkey"><table><tr><td class="code"><pre><code class="hljs autohotkey">为什么要动态引入？<br>一： 动态引入后，我们如需变动静态资源的位置，只需在`setting.py`中重新设置下静态资源的路径即可，不必到各个`html`中改，省事儿。二： 项目在生产环境中运行时，一般只把静态资源暴露给用户，这样有利于网站安全。<br></code></pre></td></tr></table></figure>

<p>在<code>index</code>目录中新建一个<code>static</code>文件夹，将前端文件中的静态资源（css、js、images、ico、fonts)全都丢进去。</p>
<p>由于Django默认就已经设置好了静态资源的路径，即当前应用下的<code>static</code>文件夹，所以我们无需另外设置。</p>
<p>在<code>index.html</code>中最前面写上<code>\&amp;#123;% load static %\&#125;</code>，说明我们引入了静态资源。将标签中的静态资源都改成以下格式<code>\&amp;#123;% static &#39;css/index.css&#39; %\&#125;</code>。贴张图很明白：</p>
<p><img  src="https://pic.izhaoo.com/20180827143126.jpg"  ><span class="image-caption">静态资源</span></p>
<p>ps: js也要改，如果有图片也得改。</p>
<p>再次运行服务器，刷新下页面，是不是样式回来啦~</p>
<p><img  src="https://pic.izhaoo.com/20180827143250.jpg"  ><span class="image-caption">有样式首页</span></p>
<h1 id="模板分离"><a href="#模板分离" class="headerlink" title="模板分离"></a>模板分离</h1><p>不知道你有没有发现，我们这个项目中<code>index.html</code>和<code>article.html</code>俩个文件的头部和尾部（也就是引入的静态资源部分）是一样的，不同的只是中间内容部分。我们可以建立一个公共模板页面，然后其他页面都套用这个公共页面，只更改变化的部分即可。</p>
<figure class="highlight"><table><tr><td class="code"><pre><code class="hljs">原因很显然，牵一发而动全身。<br></code></pre></td></tr></table></figure>

<p>在<code>templates</code>目录中新建一个<code>base.html</code>，它就是我们的公共模板，写入：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml">\<span class="hljs-symbol">&amp;#123;</span>% load static %\&#125;<br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;\<span class="hljs-symbol">&amp;#123;</span>% static &#x27;css/font-awesome.min.css&#x27; %\&#125;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;\<span class="hljs-symbol">&amp;#123;</span>% static &#x27;css/bootstrap.min.css&#x27; %\&#125;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;\<span class="hljs-symbol">&amp;#123;</span>% static &#x27;css/index.css&#x27; %\&#125;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;\<span class="hljs-symbol">&amp;#123;</span>% static &#x27;favicon.ico&#x27; %\&#125;&quot;</span>&gt;</span><br>    <span class="hljs-symbol">&amp;#123;</span>% block header %<span class="hljs-symbol">&amp;#125;</span><span class="hljs-symbol">&amp;#123;</span>% endblock %<span class="hljs-symbol">&amp;#125;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>zhaoo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;navbar navbar-expand-md bg-dark navbar-dark&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;navbar-brand&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>zhaoo<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;navbar-toggler&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">data-toggle</span>=<span class="hljs-string">&quot;collapse&quot;</span> <span class="hljs-attr">data-target</span>=<span class="hljs-string">&quot;#collapsibleNavbar&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;navbar-toggler-icon&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;collapsibleNavbar&quot;&gt;</span><br><span class="hljs-comment">                &lt;ul class=&quot;navbar-nav&quot;&gt;</span><br><span class="hljs-comment">                    &lt;li class=&quot;nav-item&quot;&gt;</span><br><span class="hljs-comment">                        &lt;a class=&quot;nav-link&quot; href=&quot;/&quot;&gt;&lt;i class=&quot;fa fa-home&quot;&gt;&lt;/i&gt;&amp;nbsp;首页&lt;/a&gt;</span><br><span class="hljs-comment">                    &lt;/li&gt;</span><br><span class="hljs-comment">                    &lt;li class=&quot;nav-item&quot;&gt;</span><br><span class="hljs-comment">                        &lt;a class=&quot;nav-link&quot; href=&quot;#&quot;&gt;&lt;i class=&quot;fa fa-file-text&quot;&gt;&lt;/i&gt;&amp;nbsp;文章&lt;/a&gt;</span><br><span class="hljs-comment">                    &lt;/li&gt;</span><br><span class="hljs-comment">                    &lt;li class=&quot;nav-item&quot;&gt;</span><br><span class="hljs-comment">                        &lt;a class=&quot;nav-link&quot; href=&quot;#&quot;&gt;&lt;i class=&quot;fa fa-info-circle&quot;&gt;&lt;/i&gt;&amp;nbsp;关于&lt;/a&gt;</span><br><span class="hljs-comment">                    &lt;/li&gt;</span><br><span class="hljs-comment">                &lt;/ul&gt;</span><br><span class="hljs-comment">            &lt;/div&gt; --&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span><br>    <span class="hljs-symbol">&amp;#123;</span>% block content %<span class="hljs-symbol">&amp;#125;</span><span class="hljs-symbol">&amp;#123;</span>% endblock %<span class="hljs-symbol">&amp;#125;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;footer&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;link&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>友情链接<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>站点地图<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>关于我们<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>管理后台<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;copyright&quot;</span>&gt;</span>Copyright© 2018-2018 | <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>zhaoo<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> .AllRightsReserved<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;\<span class="hljs-symbol">&amp;#123;</span>% static &#x27;js/jquery.min.js&#x27; %\&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;\<span class="hljs-symbol">&amp;#123;</span>% static &#x27;js/bootstrap.min.js&#x27; %\&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;\<span class="hljs-symbol">&amp;#123;</span>% static &#x27;js/index.js&#x27; %\&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;\<span class="hljs-symbol">&amp;#123;</span>% static &#x27;/ckeditor/ckeditor/ckeditor.js&#x27; %\&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;\<span class="hljs-symbol">&amp;#123;</span>% static &#x27;/ckeditor/ckeditor-init.js&#x27; %\&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-symbol">&amp;#123;</span>% block footer %<span class="hljs-symbol">&amp;#125;</span><span class="hljs-symbol">&amp;#123;</span>% endblock %<span class="hljs-symbol">&amp;#125;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>然后在<code>index.html</code>中我们就可以这么写了：</p>
<figure class="highlight handlebars"><table><tr><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-symbol">&amp;#123;</span>% extends &quot;base.html&quot; %<span class="hljs-symbol">&amp;#125;</span></span><br><span class="xml"><span class="hljs-symbol">&amp;#123;</span>% block content %<span class="hljs-symbol">&amp;#125;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container list wrap&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-symbol">&amp;#123;</span>% for article in articleList %<span class="hljs-symbol">&amp;#125;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;\<span class="hljs-symbol">&amp;#123;</span>% url &#x27;index:article&#x27; article.id %\&#125;&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">article.title</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;info&quot;</span>&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa fa-clock-o&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>发布时间: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">article.post_time</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa fa-eye&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>阅读量: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">article.views</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">            </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">article.content</span> &#125;&#125;</span><span class="xml"></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-symbol">&amp;#123;</span>% endfor %<span class="hljs-symbol">&amp;#125;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-symbol">&amp;#123;</span>% endblock %<span class="hljs-symbol">&amp;#125;</span></span><br></code></pre></td></tr></table></figure>
<p>解释：</p>
<figure class="highlight clean"><table><tr><td class="code"><pre><code class="hljs clean">模板：<br>&amp;#<span class="hljs-number">123</span>;% block content %&amp;#<span class="hljs-number">125</span>;<br>&amp;#<span class="hljs-number">123</span>;% endblock %&amp;#<span class="hljs-number">125</span>;<br><br>子文件：<br>&amp;#<span class="hljs-number">123</span>;% extends <span class="hljs-string">&quot;base.html&quot;</span> %&amp;#<span class="hljs-number">125</span>;  <span class="hljs-comment">//引入base.html模板</span><br>&amp;#<span class="hljs-number">123</span>;% block content %&amp;#<span class="hljs-number">125</span>;<br>    ...<span class="hljs-keyword">code</span>...  #其中变化的部分<br>&amp;#<span class="hljs-number">123</span>;% endblock %&amp;#<span class="hljs-number">125</span>;<br></code></pre></td></tr></table></figure>

<p>子文件中<code>&amp;#123;% block content %&amp;#125;&amp;#123;% endblock %&amp;#125;</code>块包围的内容就是不同的部分，系统解析时会动态插入模板中，最后生成一个个页面。</p>
<p>做到这一步，我们的博客项目就已经基本成型了，前台是我们自己写的，后台是Django自带的。</p>
<h1 id="后台管理页面美化"><a href="#后台管理页面美化" class="headerlink" title="后台管理页面美化"></a>后台管理页面美化</h1><p>这部分开始都是一些无关紧要的优化，做不做随意。</p>
<h1 id="安装Mdeditor富文本编辑器"><a href="#安装Mdeditor富文本编辑器" class="headerlink" title="安装Mdeditor富文本编辑器"></a>安装Mdeditor富文本编辑器</h1>
      </section>
      <section class="extra">
        
          <ul class="copyright">
  
    <li><strong>本文作者：</strong>zhaoo</li>
    <li><strong>本文链接：</strong><a href="https://www.izhaoo.com/2018/08/27/django-build-blog/index.html" title="https:&#x2F;&#x2F;www.izhaoo.com&#x2F;2018&#x2F;08&#x2F;27&#x2F;django-build-blog&#x2F;index.html">https:&#x2F;&#x2F;www.izhaoo.com&#x2F;2018&#x2F;08&#x2F;27&#x2F;django-build-blog&#x2F;index.html</a></li>
    <li><strong>版权声明：</strong>本博客所有文章均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" title="BY-NC-SA" target="_blank" rel="noopener">BY-NC-SA</a> 许可协议，转载请注明出处！</li>
  
</ul>
        
        
          <section class="donate">
  <div id="qrcode-donate">
    <img src="https://pic.izhaoo.com/alipay.jpg">
  </div>
  <div class="icon">
    <a href="javascript:;" id="alipay"><i class="iconfont iconalipay"></i></a>
    <a href="javascript:;" id="wechat"><i class="iconfont iconwechat-fill"></i></a>
  </div>
</section>
        
        
  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag">后端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">框架</a></li></ul> 

        
  <nav class="nav">
    <a href="/2018/09/01/django-template-tags/"><i class="iconfont iconleft"></i>Django - 自定义模板标签</a>
    <a href="/2018/08/19/cycling-east-zhejiang/">浙东骑行<i class="iconfont iconright"></i></a>
  </nav>

      </section>
      
        <section class="comments">
  
    <div class="btn" id="comments-btn">查看评论</div>
  
  
<div id="valine"></div>
<script defer src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
  window.onload = function () {
    var loadValine = function () {
      new Valine({
        el: '#valine',
        app_id: "5nmYX1URDFyDdOVu6WxizEsF-gzGzoHsz",
        app_key: "xllg4mYlf0eT3efi7N0VOTeH",
        placeholder: "雁过留痕",
        avatar: "mp",
        pageSize: "10",
        lang: "zh-CN",
      });
    }
    if ( true ) {
      $("#comments-btn").on("click", function () {
        $(this).hide();
        loadValine();
      });
    } else {
      loadValine();
    }
  };
</script>

</section>
      
    </section>
  </div>
</article></div>
      <div class="col-xl-3">
        
          
        
      </div>
    </div>
  </div>
</main>
  

<footer class="footer">
  <div class="footer-social"><a 
        href="tencent://message/?Menu=yes&uin=894519210 "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#12B7F5'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconQQ "></i>
      </a><a 
        href="javascript:; "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#09BB07'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconwechat-fill "></i>
      </a><a 
        href="https://www.instagram.com/izhaoo/ "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#DA2E76'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconinstagram "></i>
      </a><a 
        href="https://github.com/zhaoo "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#9f7be1'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  icongithub-fill "></i>
      </a><a 
        href="mailto:izhaoo@163.com "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color=#FF3B00" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconmail"></i>
      </a></div>
  
    <div class="footer-copyright"><p>Copyright© 2019 - 2021 | <a target="_blank" href="https://www.izhaoo.com">zhaoo</a> .AllRightsReserved</p><p>浙ICP备17007822号</p></div>
  
</footer>
  
      <div class="fab fab-plus">
    <i class="iconfont iconplus"></i>
  </div>
  
    <div class="fab fab-like">
      <i class="iconfont iconheart"></i>
    </div>
  
  
    <div class="fab fab-daovoice">
      <i class="iconfont iconcomment"></i>
    </div>
  
  
  <div class="fab fab-up">
    <i class="iconfont iconcaret-up"></i>
  </div>
  
  
  
    
<script src="/js/color-mode.js"></script>

  
  
    <div class="search">
  <div class="search-container">
    <div class="search-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <div class="search-input-wrapper">
      <i class="search-input-icon iconfont iconsearch"></i>
      <input class="search-input" type="search" id="search-input" placeholder="Search..." autofocus autocomplete="off"
        autocorrect="off" autocapitalize="off">
    </div>
    <div class="search-output" id="search-output"></div>
  </div>
</div>
  
</body>

<script src="https://pic.izhaoo.com/jquery.js"></script>





  
<script src="https://pic.izhaoo.com/lazyload.js"></script>




  
<script src="https://pic.izhaoo.com/fancybox.js"></script>






  
<script src="https://pic.izhaoo.com/qrcode.js"></script>




<script src="/js/utils.js"></script>
<script src="/js/script.js"></script>



  <script>
  $.getScript("//cdn.jsdelivr.net/npm/leancloud-storage@4.1.0/dist/av-min.js", () => {

    AV.init({
      appId: '5nmYX1URDFyDdOVu6WxizEsF-gzGzoHsz',
      appKey: 'xllg4mYlf0eT3efi7N0VOTeH',
      serverURLs: 'https://leancloud.cn/',
    });

    const Counter = AV.Object.extend("Counter");
    const Like = AV.Object.extend("Like");

    const showCount = (Counter) => {
      const asyncLimit = new AsyncLimit(2);
      $(".leancloud-counter").each(async (e) => {
        const url = $(".leancloud-counter").eq(e).attr('id').trim();
        const query = new AV.Query("Counter");
        query.equalTo("words", url);
        let count = await asyncLimit.run(() => query.count());
        $(".leancloud-counter").eq(e).text(count ? count : 0);
      });
    }

    const addCount = (Counter) => {
      const url = $(".leancloud-counter").length === 1 ? $(".leancloud-counter").attr('id').trim() : 'https://www.izhaoo.com';
      var query = new Counter;
      query.save({
        words: url
      });
    }

    const showLike = (Like) => {
      const asyncLimit = new AsyncLimit(2);
      $(".leancloud-like").each(async (e) => {
        const url = $(".leancloud-like").eq(e).attr('id').trim();
        const query = new AV.Query("Like");
        query.equalTo("path", url);
        let count = await asyncLimit.run(() => query.count());
        $(".leancloud-like").eq(e).text(count ? count : 0);
      });
    }

    const addLike = (Like) => {
      const url = $(".leancloud-like").length === 1 ? $(".leancloud-like").attr('id').trim() : 'https://www.izhaoo.com';
      var query = new Like;
      query.save({
        path: url,
        nickName: 'Anonymous'
      });
      $(".leancloud-like").addClass('islike');
      $(".fab-like").children(".iconfont").removeClass("iconheart").addClass("iconheart-fill").css("color", "#eb3223");
      ZHAOO.zui.message({ text: '爱你哦~', type: 'success' });
      setTimeout(() => showLike(Like), 1000);
    }

    const handleLikeClick = () => {
      const isLike = $(".leancloud-like").length === 1 && $(".leancloud-like").hasClass('islike') ? true : false;
      if (isLike) {
        ZHAOO.zui.message({ text: '小心心不可以收回呢~', type: 'warning' });
      } else {
        addLike(Like);
      }
    }

    $(function () {
      addCount(Counter);
      showCount(Counter);
      showLike(Like);
      $(".fab-like").on("click", function () {
        handleLikeClick();
      });
    });

  });
</script>



  

<script>
  (function (i, s, o, g, r, a, m) {
    i["DaoVoiceObject"] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    a.charset = "utf-8";
    m.parentNode.insertBefore(a, m)
  })(window, document, "script", "https://pic.izhaoo.com/daovoice.js", "daovoice")
  daovoice('init', {
    app_id: "a7794e2b"
  }, {
    launcher: {
      disableLauncherIcon: true,
    },
  });
  daovoice('update');
</script>



  <script>
    (function () {
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      } else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>



  <script defer src='https://hm.baidu.com/hm.js?4c204d8bc027a0455b5fc642ac334ca8'></script>



  <script defer src='https://s9.cnzz.com/z_stat.php?id=1278889820&web_id=1278889820'></script>



  <script>
    window.ga = window.ga || function () {
      (ga.q = ga.q || []).push(arguments)
    };
    ga.l = +new Date;
    ga('create', 'UA-105851767-1', 'auto');
    ga('send', 'pageview');
  </script>
  <script defer src='https://www.google-analytics.com/analytics.js'></script>



  <script>
    var _mtac = {};
    (function () {
      var mta = document.createElement("script");
      mta.src = "//pingjs.qq.com/h5/stats.js?v2.0.4";
      mta.setAttribute("name", "MTAH5");
      mta.setAttribute("sid", "500719113");
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(mta, s);
    })();
  </script>





</html>